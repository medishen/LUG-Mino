%----------------------------------------------
% Header and Footer Styling
%----------------------------------------------
\usepackage{fancyhdr}
\usepackage{lastpage}

%----------------------------------------------
% Custom Header/Footer Commands
%----------------------------------------------
\newcommand{\lugheader}[2]{
    \fancyhead[L]{\lugfont{#1}}
    \fancyhead[R]{\lugfont{#2}}
}

\newcommand{\lugfooter}[3]{
    \fancyfoot[L]{\footersize\lugitalic{#1}}
    \fancyfoot[C]{\footersize #2}
    \fancyfoot[R]{\footersize\lugitalic{#3}}
}

%----------------------------------------------
% Page Style Definitions
%----------------------------------------------
\fancypagestyle{lugmain}{
    \fancyhf{}
    \lugheader{Linux User Group}{MinoDasht}
    \lugfooter{\lugsessiontitle}{Page \thepage\ of \pageref{LastPage}}{\today}
    \renewcommand{\headrulewidth}{0.4pt}
    \renewcommand{\footrulewidth}{0.4pt}
    \renewcommand{\headrule}{\hbox to\headwidth{\color{lugprimary}\leaders\hrule height \headrulewidth\hfill}}
    \renewcommand{\footrule}{\hbox to\headwidth{\color{lugmedium}\leaders\hrule height \footrulewidth\hfill}}
}

\fancypagestyle{lugtitle}{
    \fancyhf{}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0pt}
}

\fancypagestyle{lugtoc}{
    \fancyhf{}
    \fancyfoot[C]{\footersize Page \thepage}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0.4pt}
    \renewcommand{\footrule}{\hbox to\headwidth{\color{lugmedium}\leaders\hrule height \footrulewidth\hfill}}
}

\fancypagestyle{lugplain}{
    \fancyhf{}
    \fancyfoot[C]{\footersize Page \thepage}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0.4pt}
    \renewcommand{\footrule}{\hbox to\headwidth{\color{lugmedium}\leaders\hrule height \footrulewidth\hfill}}
}

%----------------------------------------------
% Chapter/Section Page Styles
%----------------------------------------------
\fancypagestyle{lugchapter}{
    \fancyhf{}
    \lugfooter{\lugsessiontitle}{Page \thepage\ of \pageref{LastPage}}{\today}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0.4pt}
    \renewcommand{\footrule}{\hbox to\headwidth{\color{lugmedium}\leaders\hrule height \footrulewidth\hfill}}
}

%----------------------------------------------
% Default Page Style
%----------------------------------------------
\pagestyle{lugmain}

%----------------------------------------------
% Watermark (Optional)
%----------------------------------------------
\usepackage{draftwatermark}
\SetWatermarkText{}
\SetWatermarkScale{0.8}
\SetWatermarkLightness{0.95}

%----------------------------------------------
% Header/Footer Customization Commands
%----------------------------------------------
\newcommand{\setheaderfooter}[4]{
    \fancyhead[L]{\lugfont{#1}}
    \fancyhead[R]{\lugfont{#2}}
    \fancyfoot[L]{\footersize\lugitalic{#3}}
    \fancyfoot[R]{\footersize\lugitalic{#4}}
}

\newcommand{\clearheaderfooter}{
    \fancyhf{}
}

%----------------------------------------------
% Section Mark Commands
%----------------------------------------------
\renewcommand{\sectionmark}[1]{\markboth{#1}{}}
\renewcommand{\subsectionmark}[1]{\markright{#1}}

%----------------------------------------------
% Custom Page Numbering
%----------------------------------------------
\newcommand{\frontmatter}{
    \pagenumbering{roman}
    \setcounter{page}{1}
    \pagestyle{lugtoc}
}

\newcommand{\mainmatter}{
    \clearpage
    \pagenumbering{arabic}
    \setcounter{page}{1}
    \pagestyle{lugmain}
}

\newcommand{\backmatter}{
    \clearpage
    \pagestyle{lugplain}
}